@page "/account"
@inherits UserAccountViewModel

@if (userAccount == null)
{
    <h2 class="text-dark pt-2 pb-3">Ładowanie strony...</h2>
}
else
{
    <h2 class="text-dark pt-2 pb-3">Moje konto</h2>

    <div class="row backgroundWhite col-6">
        <div class="form-group">
            <div class="row">
                <div class="col-4">
                    <label>Nazwa użytkownika</label>
                </div>
                <div class="col-8">
                    <span class="form-control">@userAccount.Username</span>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-4">
                    <label>Email</label>
                </div>
                <div class="col-8">
                    <span class="form-control">@userAccount.Email</span>
                </div>
            </div>
            <br />
            <h2 class="text-dark pt-2 pb-3">Zmień hasło</h2>
            <br />
            <EditForm method="post" OnSubmit="UserUpdate" EditContext="@editContext">
                <DataAnnotationsValidator />

                <div class="form-group">
                    <div class="row">
                        <div class="col-4">
                            <label for="@userUpdate.Password">Hasło</label>
                        </div>
                        <div class="col-8">
                            <InputText type="password" @bind-Value="userUpdate.Password" class="form-control" />
                        </div>
                        <ValidationMessage For="() => userUpdate.Password" />
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <div class="row">
                        <div class="col-4">
                            <label for="@userUpdate.PasswordConfirm">Potwierdź hasło</label>
                        </div>
                        <div class="col-8">
                            <InputText type="password" @bind-Value="userUpdate.PasswordConfirm" class="form-control" />
                        </div>
                        <ValidationMessage For="() => userUpdate.PasswordConfirm" />
                    </div>
                </div>
                <br />
                <div class="col-4">
                    <button type="submit" class="btn btn-success form-control">Zmień hasło</button>
                </div>
            </EditForm>
            <br />
            <h2 class="text-dark pt-2 pb-3">Usuń konto</h2>
            <br />
            <div class="col-4">
                <button @onclick="DeleteUser" class="btn btn-danger form-control">Usuń konto</button>
            </div>
        </div>
    </div>
}